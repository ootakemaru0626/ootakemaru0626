---
layout:     post   				    # 使用的布局（不需要改）
title:      DC-1 				# 标题 
subtitle:   打靶日记之DC-1靶机 #副标题
date:       2024-07-01 				# 时间
author:     OOTAKEMARU 						# 作者
header-img: img/post-bg-dc.png 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 打靶日记
    - DC靶机系列
---

>## DC-1



### 靶机安装

官网下载https://download.vulnhub.com/dc/DC-1.zip。

解压后得到.ova文件：

![](D:\note\网络安全实训\img\DC靶机\DC-1\1.jpg)

![2](D:\note\网络安全实训\img\DC靶机\DC-1\2.png)

如果提示导入失败，点【重试】，导入完成后，打开DC-1虚拟机，出现此界面就表示开启成功。

![3](D:\note\网络安全实训\img\DC靶机\DC-1\3.png)

此处需要让DC靶机跟kali处于同一网段，用kali才能扫出DC的ip地址进行后续渗透。(DC靶机的ip设置好之后拍摄快照方便二次使用）

![4](D:\note\网络安全实训\img\DC靶机\DC-1\4.png)

![5](D:\note\网络安全实训\img\DC靶机\DC-1\5.png)



### 渗透过程

#### 1、信息收集

##### ①探测目标ip地址

探测主机的工具很多，常见的有arp-scan、nmap。

![6](D:\note\网络安全实训\img\DC靶机\DC-1\6.png)

![7](D:\note\网络安全实训\img\DC靶机\DC-1\7.png)

『注意 』

如果发现扫描结果中找不到对应的Mac地址，就需要直接删除DC1原有网络适配器，并重新添加一张NAT网卡来重新加入这个网段。

![8](D:\note\网络安全实训\img\DC靶机\DC-1\8.png)

![9](D:\note\网络安全实训\img\DC靶机\DC-1\9.png)

##### ②探测目标ip开放端口

用命令 nmap -sV -p- 192.168.253.136 探测目标的端口开放情况。

- -sV 	扫描目标主机端口上运行的软件信息
- -p-     扫描全部端口 0 ~ 65535

![10](D:\note\网络安全实训\img\DC靶机\DC-1\10.png)

##### ③网页信息收集

利用浏览器插件wappalyzer，查看站点信息，也可以自己判断，网页一看cms就是drupal cms。

![11](D:\note\网络安全实训\img\DC靶机\DC-1\11.png)

![12](D:\note\网络安全实训\img\DC靶机\DC-1\12.png)

也可以用kali自带的工具whatweb扫描出网站的相关信息，其中就包含了关键信息Drupal cms。

![13](D:\note\网络安全实训\img\DC靶机\DC-1\13.png)

然后再用御剑扫一下网站目录，目录量很大，可边扫边渗透。

![14](D:\note\网络安全实训\img\DC靶机\DC-1\14.png)

『总结 』

信息收集阶段获取到如下关键信息：

CMS是Drupal、Apache 2.2.22、PHP 5.4.45、jQuery 1.4.4、网站目录

#### 2、漏洞探测

首先从cms出发找漏洞，可以先看看drupal漏洞是什么。

![15](D:\note\网络安全实训\img\DC靶机\DC-1\15.png)

选择用MSF完成漏洞利用。

①漏洞利用工具查找

![16](D:\note\网络安全实训\img\DC靶机\DC-1\16.png)

![17](D:\note\网络安全实训\img\DC靶机\DC-1\17.png)

![18](D:\note\网络安全实训\img\DC靶机\DC-1\18.png)

![19](D:\note\网络安全实训\img\DC靶机\DC-1\19.png)

![20](D:\note\网络安全实训\img\DC靶机\DC-1\20.png)

![21](D:\note\网络安全实训\img\DC靶机\DC-1\21.png)

由于权限不够，需要将拿到的权限提升为root权限。

此处尝试使用suid提权方式进行提权：

![22](D:\note\网络安全实训\img\DC靶机\DC-1\22.png)

【find / -perm -u=s -type f 2>/dev/null】

![23](D:\note\网络安全实训\img\DC靶机\DC-1\23.png)

【ls -l /usr/bin/find】

![24](D:\note\网络安全实训\img\DC靶机\DC-1\24.png)

在linux提权指导的网站中了解命令提权方法：

https://gtfobins.github.io/

![25](D:\note\网络安全实训\img\DC靶机\DC-1\25.png)

![26](D:\note\网络安全实训\img\DC靶机\DC-1\26.png)

![27](D:\note\网络安全实训\img\DC靶机\DC-1\27.png)

【find . -exec /bin/sh \; -quit】

![28](D:\note\网络安全实训\img\DC靶机\DC-1\28.png)

#### 3、获得flag

接下来只要找到剩下的flag文件就能通关了，通过cd到 /root下，命令ls查看该目录下有哪些文件，可以发现存在thefinalflag.txt文件，这就是我们需要寻找的flag文件，通过cat命令打开查看。

![29](D:\note\网络安全实训\img\DC靶机\DC-1\29.png)



### 参考

[DC-1靶场搭建及渗透实战详细过程-金帛的博客-CSDN博客](https://blog.csdn.net/l2872253606/article/details/125463013)

